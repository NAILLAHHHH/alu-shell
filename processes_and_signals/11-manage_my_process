#!/usr/bin/env bash
# Script to manage manage_my_process: start, stop, restart

PROCESS_NAME="manage_my_process"
PID_FILE="/var/run/my_process.pid"

start() {
	    if [ -f "$PID_FILE" ]; then
		            echo "manage_my_process is already running."
			            exit 1
				        fi

					    chmod +x ./manage_my_process  # Ensure script is executable
					        nohup ./manage_my_process &> /dev/null &  
						    echo $! > "$PID_FILE"
						        echo "manage_my_process started"
						}

					stop() {
						    if [ ! -f "$PID_FILE" ]; then
							            echo "manage_my_process is not running."
								            exit 1
									        fi

										    PID=$(cat "$PID_FILE")
										        
										        if ps -p "$PID" > /dev/null 2>&1; then
												        kill "$PID"
													        sleep 1  # Allow time for process to stop
														        rm -f "$PID_FILE"
															        echo "manage_my_process stopped"
																    else
																	            echo "Process not found, cleaning up PID file."
																		            rm -f "$PID_FILE"
																			            exit 1
																				        fi
																				}

																			restart() {
																				    stop
																				        start
																					    echo "manage_my_process restarted"
																				    }

																			    case "$1" in
																				        start) start ;;
																					    stop) stop ;;
																					        restart) restart ;;
																						    *) echo "Usage: $0 {start|stop|restart}" ;;
																					    esac

